---
{"dg-publish":true,"permalink":"/laboratornye/laboratornaya-2/"}
---

### Linux Access Control Lists


![Pasted image 20250608172034.png](/img/user/Pasted%20image%2020250608172034.png)
Создаем группу `sysop`. Добавляем 6 студентов от `01 до 06`. Добавляем `student01 и student02` в группу sysop, согласно заданию.

![Pasted image 20250608172735.png](/img/user/Pasted%20image%2020250608172735.png)
Добавили всех студентов в группу `students`

![Pasted image 20250608173434.png](/img/user/Pasted%20image%2020250608173434.png)
Создал файл от имени `student03`. Настроил права как в лабе.


**Мы хотим дать пользователю student04 права на чтение и запись (но не исполнение). Почему мы не можем это сделать?**

Потому что стандартная Unix-модель прав доступа (UGO — user/group/others) не позволяет настроить индивидуальные права для конкретного пользователя, не входящего в группу файла.

Пользователь `student04` не является владельцем и не входит в группу `sysop`, значит, для него действуют только права для "others", то есть `r--`.

Чтобы выдать **только одному** конкретному пользователю (`student04`) права `rw-`, необходимо использовать ACL.



#### 1.Установка ACL

![Pasted image 20250608174123.png](/img/user/Pasted%20image%2020250608174123.png)
Установил.



#### 2. Практика

**2.1. Изучите с помощью getfacl права файла student03.script.sh**
![Pasted image 20250608174350.png](/img/user/Pasted%20image%2020250608174350.png)



**2.2. С помощью setfacl предоставьте пользователь student04 права на чтение и запись скрипты student03.script.sh**.
![Pasted image 20250608174628.png](/img/user/Pasted%20image%2020250608174628.png)
Все успешно получилось, дополнительно проверил с помощью `getfacl`



**2.3. В дополнение к трем пользователям из ЛР01, создайте еще двух ползователей (user4, user5). Затем создайте еще одну группу (напр. group2) и поместите в нее новых пользователей (user4, user5).**
![Pasted image 20250608175304.png](/img/user/Pasted%20image%2020250608175304.png)



**2.4. Внутри директории пользователя user5 создайте от его имени директорию important_files**.
![Pasted image 20250608175553.png](/img/user/Pasted%20image%2020250608175553.png)

Есть ли разница между выводом `ls -l` и `getfacl`?
`getfacl` показывает расширенные права доступа.

**2.5. Зайдите под четвертым (user4) (относительно пользователей из ЛР01) и выполните следующие действия:**

- Попытайтесь добавить новую директорию внутри _important_files_. Можете ли вы это сделать? Почему?
![Pasted image 20250608192231.png](/img/user/Pasted%20image%2020250608192231.png)
Не получается создать. По умолчанию права доступа `drwxr-xr-x`, а пользователь `user_4` относится к other пользователям.

- Добавьте новое **ACL** правило для директории _important_files_ такое, чтобы четвертый пользователь (user4) имел права `rwx`;
![Pasted image 20250608210432.png](/img/user/Pasted%20image%2020250608210432.png)

- Есть ли разница между выводом `ls -l` и `getfacl` для _important_files_? Почему?
![Pasted image 20250608210654.png](/img/user/Pasted%20image%2020250608210654.png)
`getfacl` показывает расширенные права доступа.

- Попытайтесь добавить новую директорию снова от имени четвертого пользователя (**user4**) внутри _important_files_. Можете ли вы это сделать? Почему?
![Pasted image 20250608211027.png](/img/user/Pasted%20image%2020250608211027.png)
Мы добавили права пользователю, что позволило `user_4` создавать новые папки внутри `important_files`



**2.6. Авторизуйтесь под именем пятого пользователя (user5) и выполните следующие действия:**

- Попытайтесь создать какой-нибудь файл внутри директории четвертого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?
![Pasted image 20250608230232.png](/img/user/Pasted%20image%2020250608230232.png)
`user_5` не может создать файл внутри директории user_4, сразу проверяем разрешения и видим, что `user_5` относится к `group`

- Добавьте новое **ACL** правило для директории _important_files_ такое, чтобы группа из четвертого и пятого пользователя (group2) имела права `rwx`; 
![Pasted image 20250608230732.png](/img/user/Pasted%20image%2020250608230732.png)

- Попытайтесь создать какой-нибудь файл внутри директории четвертого пользователя из предыдущего шага. Можете ли вы это сделать? Почему?
![Pasted image 20250608230900.png](/img/user/Pasted%20image%2020250608230900.png)
Поскольку мы изменили права группы только для уже существующих файлов в каталоге **important_files**, этого недостаточно: **user_5** всё ещё не может создавать новые файлы в директории **mua**, созданной **user4**. Чтобы обеспечить нужные права для всех **будущих** файлов и папок, которые будут появляться внутри **important_files**, нужно использовать специальную опцию **`-d`**. Она задаёт наследуемые права, применяемые автоматически ко всему новому содержимому этой директории.



**2.7. Снова авторизуйтесь под именем четвертого пользователя (user4) и создайте какой-либо файл в своей директории внутри _important_files_. Выполните следующие действия:**
![Pasted image 20250608231632.png](/img/user/Pasted%20image%2020250608231632.png)

- Авторизуйтесь под пятым пользователем (**user5**). Можете ли вы отредактировать созданный файл? Почему?
![Pasted image 20250608231810.png](/img/user/Pasted%20image%2020250608231810.png)
`getfacl` показал, что нет разрешения -wx

- Добавьте новое **ACL** правило, которое разрешало бы пользователям второй группы (**group2**) редактировать любые файлы внутри директории четвертого пользователя (**user4**) внутри **important_files**;
![Pasted image 20250608232127.png](/img/user/Pasted%20image%2020250608232127.png)
- Снова от имени четвертого пользователя (**user4**) создайте в описываемой директории новый файл; 
![Pasted image 20250608232418.png](/img/user/Pasted%20image%2020250608232418.png)
Cоздал файл `file12345.txt`
- Может ли теперь пятый пользователь (user5) редактировать эти файлы? Какие? Почему?
![Pasted image 20250608233035.png](/img/user/Pasted%20image%2020250608233035.png) ![Pasted image 20250608233406.png](/img/user/Pasted%20image%2020250608233406.png)
Файл в `important_files` не могу редактировать

![Pasted image 20250608233452.png](/img/user/Pasted%20image%2020250608233452.png)
![Pasted image 20250608233520.png](/img/user/Pasted%20image%2020250608233520.png)
Файл внутри `dir123123` я могу редактировать.
Все работает в соответствии с правилами.



**2.8. Покажите все созданные вами правила для второй группы (group2, внутри которой четвертый и пятый пользователи). Затем, удалите все эти правила.** 
![Pasted image 20250608233730.png](/img/user/Pasted%20image%2020250608233730.png)
Показал все правила

![Pasted image 20250608233947.png](/img/user/Pasted%20image%2020250608233947.png)
Удалил все правила



**2.9. Авторизуйтесь по четвертым пользователем (user4). Создайте третий файл внутри своей директории внутри _important_files_**. 
![Pasted image 20250608234307.png](/img/user/Pasted%20image%2020250608234307.png)

**2.10. Может ли теперь пятый пользователь (user5) редактировать файлы внутри директории четвертого пользователя? Какие? Почему?**
![Pasted image 20250608234731.png](/img/user/Pasted%20image%2020250608234731.png)
Все файлы доступны только для чтения. Т.к все правила для `group_2` мы удалили.

**2.11. Удалите все ACL правила для директории четвертого пользователя, затем повторите предыдущий шаг. Что изменилось? Почему?**
![Pasted image 20250608235756.png](/img/user/Pasted%20image%2020250608235756.png)
Все правила снова стандартные.