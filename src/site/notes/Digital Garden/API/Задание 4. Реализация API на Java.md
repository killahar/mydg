---
{"dg-publish":true,"permalink":"/digital-garden/api/zadanie-4-realizacziya-api-na-java/"}
---

___
https://github.com/killahar/api

**ФИО:** 2022-ФГиИБ-ИБ-2б Притчин Андрей Александрович
___
### Реализация структуры


`package src {`
    `package main {`
        `package java {`
            `package com.killahar.api {`
                `package controller {`
                    `class GlobalExceptionHandler {}`
                    `class ProjectController {}`
                `}`
                `package entity {`
                    `package status {`
                        `enum ApplicationStatus {}`
                        `enum FreelancerLevel {}`
                        `enum ProjectStatus {}`
                        `enum SkillLevel {}`
                    `}`
                    `class Application {}`
                    `class Freelancer {}`
                    `class Project {}`
                    `class Skill {}`
                    `class TeamLead {}`
                `}`
                `package repository {`
                    `interface ProjectRepository {}`
                    `interface TeamLeadRepository {}`
                `}`
                `package service {`
                    `class ApiApplication {}`
                `}`
            `}`
        `}`
    `}`
`}`


### Реализованы все сущности


`@Data`  
`@Entity`  
`public class TeamLead {`  
    `@Id`  
    `@GeneratedValue(strategy = GenerationType.AUTO)`  
    `private UUID teamleadId;`  
  
    `@NotBlank(message = "Имя тимлида не должно быть пустым.")`  
    `private String name;`  
  
    `@NotBlank(message = "Email не должен быть пустым.")`  
    `@Email(message = "Некорректный формат email.")`  
    `private String email;`  
  
    `@OneToMany(mappedBy = "teamlead")`  
    `private Set<Project> projects;`  
`}`


`@Data`  
`@Entity`  
`public class Application {`  
    `@Id`  
    `@GeneratedValue(strategy = GenerationType.AUTO)`  
    `private UUID applicationId;`  
  
    `@ManyToOne`  
    `@JoinColumn(name = "freelancer_id", nullable = false)`  
    `private Freelancer freelancer;`  
  
    `@ManyToOne`  
    `@JoinColumn(name = "project_id", nullable = false)`  
    `private Project project;`  
  
    `private String message;`  
  
    `@Enumerated(EnumType.STRING)`  
    `@Column(nullable = false)`  
    `private ApplicationStatus status;`  
`}`

И другие.


### Реализована простая структура взаимодействия сущностей


`@RestController`  
`@RequestMapping("/api/projects")`  
`@Validated`  
`public class ProjectController {`  
  
    `@Autowired`  
    `private ()ProjectService projectService;`  
  
    `@Autowired`  
    `private TeamLeadRepository teamLeadRepository; // Объявление репозитория`  
  
    `@PostMapping("/create")`  
    `public ResponseEntity<Project> createProject(@Valid @RequestBody Project project) {`  
        `Project createdProject = projectService.createProject(project);`  
        `return ResponseEntity.status(HttpStatus.CREATED).body(createdProject);`  
    `}`  
  
    `@GetMapping("/teamlead/{teamleadId}")`  
    `public ResponseEntity<List<Project>> getProjectsByTeamlead(@PathVariable UUID teamleadId) {`  
        `TeamLead teamlead = teamLeadRepository.findById(teamleadId)`  
                `.orElseThrow(() -> new IllegalArgumentException("Тимлид не найден с id: " + teamleadId));`  
        `List<Project> projects = projectService.getProjectsByTeamlead(teamleadId);`  
        `if (projects.isEmpty()) {`  
            `return ResponseEntity.status(HttpStatus.NOT_FOUND).build();`  
        `}`  
        `return ResponseEntity.ok(projects);`  
    `}`  
  
    `// Новый метод для получения всех фрилансеров по проекту`  
    `@GetMapping("/{projectId}/freelancers")`  
    `public ResponseEntity<Set<Freelancer>> getFreelancersByProject(@PathVariable UUID projectId) {`  
        `Set<Freelancer> freelancers = projectService.getFreelancersByProject(projectId);`  
        `if (freelancers.isEmpty()) {`  
            `return ResponseEntity.status(HttpStatus.NOT_FOUND).build();`  
        `}`  
        `return ResponseEntity.ok(freelancers);`  
    `}`  
`}`